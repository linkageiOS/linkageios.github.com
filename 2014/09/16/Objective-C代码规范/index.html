<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Objective-C代码规范 | SmartArrow</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="为什么要有代码规范？
对于团队，如果代码风格不统一，阅读或修改同事的代码会非常困难，造成潜在的风险。
对于个人，代码规范是对自身编码习惯的一种监督，如果没有这种监督，有时候因为偷懒，会写出难看的代码，时间长了自己都看不懂。这样对于代码的维护性是不利的。
代码规范的内容？
代码规范包含的范围十分广泛。从一个变量的命名到一个类的设计，我觉得都属于代码规范的范畴。从实践的角度，可以把代码规范分成两个部分">
<meta property="og:type" content="article">
<meta property="og:title" content="Objective-C代码规范">
<meta property="og:url" content="http://linkageios.github.io/2014/09/16/Objective-C代码规范/">
<meta property="og:site_name" content="SmartArrow">
<meta property="og:description" content="为什么要有代码规范？
对于团队，如果代码风格不统一，阅读或修改同事的代码会非常困难，造成潜在的风险。
对于个人，代码规范是对自身编码习惯的一种监督，如果没有这种监督，有时候因为偷懒，会写出难看的代码，时间长了自己都看不懂。这样对于代码的维护性是不利的。
代码规范的内容？
代码规范包含的范围十分广泛。从一个变量的命名到一个类的设计，我觉得都属于代码规范的范畴。从实践的角度，可以把代码规范分成两个部分">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Objective-C代码规范">
<meta name="twitter:description" content="为什么要有代码规范？
对于团队，如果代码风格不统一，阅读或修改同事的代码会非常困难，造成潜在的风险。
对于个人，代码规范是对自身编码习惯的一种监督，如果没有这种监督，有时候因为偷懒，会写出难看的代码，时间长了自己都看不懂。这样对于代码的维护性是不利的。
代码规范的内容？
代码规范包含的范围十分广泛。从一个变量的命名到一个类的设计，我觉得都属于代码规范的范畴。从实践的角度，可以把代码规范分成两个部分">

  
    <link rel="alternative" href="/atom.xml" title="SmartArrow" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<div class="profilepic">
			<img src="http://linkageios.github.io/images/logo.png">
		</div>

		<hgroup>
		  <h1 class="header-author"><a href="/">SmartArrow</a></h1>
		</hgroup>

		
		<p class="header-subtitle">技术文档</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="/#" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/#" title="rss">rss</a>
					        
								<a class="facebook" target="_blank" href="/#" title="facebook">facebook</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud">
						<a href="/tags/ARC/" style="font-size: 10.00px;">ARC</a><a href="/tags/LCBaseViewController/" style="font-size: 10.00px;">LCBaseViewController</a><a href="/tags/LCDataManager/" style="font-size: 10.00px;">LCDataManager</a><a href="/tags/LCMenuView/" style="font-size: 10.00px;">LCMenuView</a><a href="/tags/POP/" style="font-size: 10.00px;">POP</a><a href="/tags/iconsole/" style="font-size: 10.00px;">iconsole</a><a href="/tags/json/" style="font-size: 10.00px;">json</a><a href="/tags/xml/" style="font-size: 10.00px;">xml</a><a href="/tags/代码优化/" style="font-size: 10.00px;">代码优化</a><a href="/tags/内存/" style="font-size: 10.00px;">内存</a><a href="/tags/分享/" style="font-size: 10.00px;">分享</a><a href="/tags/动画/" style="font-size: 10.00px;">动画</a><a href="/tags/地图/" style="font-size: 10.00px;">地图</a><a href="/tags/效率/" style="font-size: 20.00px;">效率</a><a href="/tags/架构/" style="font-size: 10.00px;">架构</a><a href="/tags/网络/" style="font-size: 10.00px;">网络</a><a href="/tags/规范/" style="font-size: 20.00px;">规范</a><a href="/tags/路线图/" style="font-size: 10.00px;">路线图</a><a href="/tags/高德/" style="font-size: 10.00px;">高德</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.crysnower.cn">StephenZhu&#39;s Blog</a>
			        
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					我是谁，我从哪里来，我到哪里去？我就是我，是颜色不一样的吃货…
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay"></div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="http://linkageios.github.io/images/logo.png">
			</div>

			<hgroup>
			  <h1 class="header-author"><a href="/">SmartArrow</a></h1>
			</hgroup>
			
			<p class="header-subtitle">技术文档</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="/#" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/#" title="rss">rss</a>
			        
						<a class="facebook" target="_blank" href="/#" title="facebook">facebook</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <article id="post-Objective-C代码规范" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/09/16/Objective-C代码规范/" class="article-date">
  	<time datetime="2014-09-16T09:33:00.000Z" itemprop="datePublished">9月 16 2014</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/规范/">规范</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Objective-C代码规范
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="为什么要有代码规范？">为什么要有代码规范？</h1>
<p>对于团队，如果代码风格不统一，阅读或修改同事的代码会非常困难，造成潜在的风险。</p>
<p>对于个人，代码规范是对自身编码习惯的一种监督，如果没有这种监督，有时候因为偷懒，会写出难看的代码，时间长了自己都看不懂。这样对于代码的维护性是不利的。</p>
<h1 id="代码规范的内容？">代码规范的内容？</h1>
<p>代码规范包含的范围十分广泛。从一个变量的命名到一个类的设计，我觉得都属于代码规范的范畴。从实践的角度，可以把代码规范分成两个部分：</p>
<p>第一部分是规则，即一定要这么做。这里面没有对错，但需要统一。包含变量的命名、函数的命名、模块的组织、代码块的组织、宏、枚举、常量的声明、函数的粒度。</p>
<p>第二部分是风格，即一种模式化的代码设计结构。我们实现某个功能时，往往不止一种实现方式。每一种实现方式没有绝对的高低之分，不同角度的解读，就会有不同的偏好。所以这个层面上的代码规范，只能求同存异。但是不管怎样，每个人必须要有一致性的风格。就像不同的小区可以有不同的风格，但同一个小区只能有一种设计风格。风格包含代码设计中的抽象概念，比如接口、继承等等。</p>
<p><a id="more"></a></p>
<h1 id="为什么要有代码规范？-1">为什么要有代码规范？</h1>
<p>对于团队，如果代码风格不统一，阅读或修改同事的代码会非常困难，造成潜在的风险。</p>
<p>对于个人，代码规范是对自身编码习惯的一种监督，如果没有这种监督，有时候因为偷懒，会写出难看的代码，时间长了自己都看不懂。这样对于代码的维护性是不利的。</p>
<h1 id="代码规范的内容？-1">代码规范的内容？</h1>
<p>代码规范包含的范围十分广泛。从一个变量的命名到一个类的设计，我觉得都属于代码规范的范畴。从实践的角度，可以把代码规范分成两个部分：</p>
<p>第一部分是规则，即一定要这么做。这里面没有对错，但需要统一。包含变量的命名、函数的命名、模块的组织、代码块的组织、宏、枚举、常量的声明、函数的粒度。</p>
<p>第二部分是风格，即一种模式化的代码设计结构。我们实现某个功能时，往往不止一种实现方式。每一种实现方式没有绝对的高低之分，不同角度的解读，就会有不同的偏好。所以这个层面上的代码规范，只能求同存异。但是不管怎样，每个人必须要有一致性的风格。就像不同的小区可以有不同的风格，但同一个小区只能有一种设计风格。风格包含代码设计中的抽象概念，比如接口、继承等等。</p>
<h1 id="代码的规则">代码的规则</h1>
<p>规则如同法律，尽管从心底里很多人不认可，但每个人都必须遵守。看起来大家都受了束缚，但是对整个社会以及每一个人都是利大于弊。</p>
<h2 id="变量命名">变量命名</h2>
<p>变量命名历史上产生过很多方法，比较著名的有匈牙利命名法、驼峰命名法、下划线命名法。</p>
<ul>
<li>匈牙利命名法：szUserName</li>
<li>驼峰命名法：userName</li>
<li>下划线命名法：user_name</li>
</ul>
<p>用Objective-C开发，我们就参考苹果的官方命名方式即可，苹果采用的是驼峰命名法。</p>
<p>苹果的变量命名方式常常被其它语言的开发者所吐槽，因为它的名有时候是在太长了！！！下面是3个最长的Objective-C属性名：<br>[56] automaticallyEnablesStillImageStabilizationWhenAvailable<br>[54] availableMediaCharacteristicsWithMediaSelectionOptions<br>[49] outputObscuredDueToInsufficientExternalProtection<br>变量声明最重要的是清晰其次才考虑长短，如果为了简短而含糊不清，是不可取的。</p>
<blockquote>
<p><a href="http://segmentfault.com/a/1190000000370048" target="_blank" rel="external">Objective-C项目的命名有多长</a></p>
</blockquote>
<p>拿现有代码举例</p>
<table>
<thead>
<tr>
<th style="text-align:left">变量含义</th>
<th style="text-align:left">Not Good</th>
<th style="text-align:left">Good</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">昵称输入框</td>
<td style="text-align:left">tfNickName</td>
<td style="text-align:left">nickNameTextField</td>
</tr>
<tr>
<td style="text-align:left">密码ImageView</td>
<td style="text-align:left">imvPass</td>
<td style="text-align:left">passwordImageView</td>
</tr>
<tr>
<td style="text-align:left">我的搜索条</td>
<td style="text-align:left">mysearchBar</td>
<td style="text-align:left">mySearchBar</td>
</tr>
</tbody>
</table>
<p><strong>类变量</strong><br>前面加下划线，和系统框架保持一致</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">@interface UIViewController : UIResponder &lt;NSCoding, UIAppearanceContainer&gt; {</span></div><div class="line">    <span class="comment">@package</span></div><div class="line">    UIView           <span class="keyword">*</span>_view;</div><div class="line">    UITabBarItem     <span class="keyword">*</span>_tabBarItem;</div><div class="line">    UINavigationItem <span class="keyword">*</span>_navigationItem;</div><div class="line">    NSArray          <span class="keyword">*</span>_toolbarItems;</div><div class="line">    NSString         <span class="keyword">*</span>_title;</div><div class="line">    </div><div class="line">    NSString         <span class="keyword">*</span>_nibName;</div><div class="line">    NSBundle         <span class="keyword">*</span>_nibBundle;</div><div class="line">    ......</div></pre></td></tr></table></figure>

<p>现有的例子</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">CouponListTableViewCell</span> : <span class="title">UITableViewCell</span></span></div><div class="line">{</div><div class="line">    <span class="built_in">UIImageView</span> *imageIcon;</div><div class="line">    <span class="built_in">UIImageView</span> *imageCollect;</div><div class="line">    <span class="built_in">UILabel</span> *labelName;</div><div class="line">    <span class="built_in">UILabel</span> *labelPriceSale;</div><div class="line">    <span class="built_in">UILabel</span> *labelPriceOrigin;</div><div class="line">    <span class="built_in">UILabel</span> *labelSaleNumber;</div><div class="line">    <span class="built_in">UIImageView</span> *imageArrow;</div><div class="line">}</div></pre></td></tr></table></figure>

<p><strong>类变量与属性</strong><br>属性是Objective-C的一种高级语法，属性可以完全替换类变量，并且提供更强大的访问控制（strong、weak、nonatomic、readonly…）,而且属性也只需要用一行就能搞定，所以为什么还要用类变量呢？<br>属性声明后不用写@synthesize，且会自动生成类变量。<a href="http://stackoverflow.com/questions/12119284/xcode-4-automatically-generates-ivars-when-using-property-where-can-i-find-the" target="_blank" rel="external">资料&gt;</a></p>
<p><strong>例外</strong><br>一些局部变量允许用最简单的方式命名：i、j、temp<br>一些常用的缩写可以不用驼峰：RMB，OBD</p>
<h2 id="函数命名">函数命名</h2>
<p>Objective-C中的函数不同于其他语言，函数名是按参数隔开的。初看起来是有点怪，但是习惯了就会发现这样和命名方式可读性极好，就像一句话一样。所以当你的函数名不能流利的读出来的话，那么它的命名肯定就有问题。<br>还是先举系统的例子</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="pp">- <span class="params">(void)</span>willAnimateFirstHalfOfRotationToInterfaceOrientation:<span class="params">(<span class="variable">UIInterfaceOrientation</span>)</span>toInterfaceOrientation duration:<span class="params">(<span class="variable">NSTimeInterval</span>)</span>duration</span></div></pre></td></tr></table></figure>

<p>这里面值得注意的几点：</p>
<ul>
<li>最左边的（+、-）和返回类型的左括号之间有一个空格，返回类型的右括号与第一个参数之间没有空格；</li>
<li>函数名中每一段描述都以小写字母开头，描述的写法要考虑清晰明确，参考变量命名；</li>
<li>如果函数名过长，应该换行，按冒号对齐；</li>
<li>从描述中可以看出对应参数的意义。</li>
</ul>
<p>再看看我们自己的命名</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="number">1</span>、最后一个参数描述Selector首字母大写了</div><div class="line">+(<span class="built_in">UIButton</span> *)createButton:(MUButtonItemAttribute *)attr target:(<span class="keyword">id</span>)target Selector:(SEL)sel;</div><div class="line"><span class="number">2</span>、有一些多余的空格</div><div class="line">+ (AppDelegate *) appDelegate;</div><div class="line">- (<span class="keyword">void</span>)hideTabbar :(<span class="built_in">BOOL</span>)status;</div><div class="line"><span class="number">3</span>、加减号和括号之间要有空格</div><div class="line">-(<span class="keyword">void</span>)pushEvent:(<span class="built_in">NSDictionary</span>*)dictionary target:(<span class="keyword">id</span>)target;</div><div class="line"><span class="number">4</span>、参数名和参数要对应，含义清晰</div><div class="line">- (<span class="keyword">void</span>)setNavBackButton:(<span class="built_in">NSString</span> *)string;</div><div class="line">- (<span class="keyword">id</span>)init:(<span class="built_in">NSString</span>*)nickName phoneNumber:(<span class="built_in">NSString</span> *)phoneNumber;</div><div class="line">- (<span class="keyword">void</span>)setTextFieldBackGroud:(<span class="built_in">CGRect</span>)rect;</div><div class="line">- (<span class="keyword">id</span>)init:(<span class="built_in">NSInteger</span>)flag;</div><div class="line">- (<span class="keyword">void</span>)requestHealthRecord:(<span class="built_in">NSString</span> *)typeStr;</div><div class="line"><span class="number">5</span>、函数名过长要换行</div><div class="line">- (<span class="keyword">id</span>)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(<span class="built_in">NSString</span> *)reuseIdentifier containingTableView:(<span class="built_in">UITableView</span> *)containingTableView leftUtilityButtons:(<span class="built_in">NSArray</span> *)leftUtilityButtons rightUtilityButtons:(<span class="built_in">NSArray</span> *)rightUtilityButtons;</div><div class="line"><span class="number">6</span>、命名风格混乱</div><div class="line">+ (<span class="built_in">NSInteger</span>) GetServerBack:(<span class="built_in">NSString</span> *)serverName</div><div class="line">                 path_Param:(<span class="built_in">NSMutableDictionary</span>*)path_Param</div><div class="line">                query_Param:(<span class="built_in">NSMutableDictionary</span>*)query_Param</div><div class="line">                 body_Param:(<span class="built_in">NSMutableDictionary</span>*)body_Param</div><div class="line">                     method:(<span class="built_in">NSInteger</span>)method</div><div class="line">                returnValue:(<span class="built_in">NSMutableDictionary</span>*)returnValue;</div><div class="line"><span class="number">7</span>、参数之间用and、with，多此一举</div><div class="line">- (<span class="keyword">id</span>)initWithFrame:(<span class="built_in">CGRect</span>)frame andImageView:(<span class="built_in">UIImageView</span>*)imageView withImageFrame:(<span class="built_in">CGRect</span>)imageInitFrame withImageUrl:(<span class="built_in">NSURL</span>*)imageUrl;</div></pre></td></tr></table></figure>

<p><strong>命名很重要！！！</strong><br>良好的命名是写出高质量代码的前提，命名的时候除了符合以上的规范，还需要找到合适的单词来表达含义，不要为了一时之快用拼音，也千万不要出现数字。</p>
<h2 id="代码模块组织">代码模块组织</h2>
<p>这个代码模块的组织是指文件级别的，即我们应该如何划分包。<br>现有的包结构是有些问题的，导致我们找某个功能的实现文件比较麻烦。<br>参考<a href="http://www.cocoachina.com/industry/20140225/7879.html" target="_blank" rel="external">别人的经验</a>，个人觉得这样的划分还是不错的。</p>
<p><strong>文件的命名</strong><br>我们自己创建的文件，应该有统一的前缀。比如HJMainViewController，这也符合系统的命名规范。Objective-C没有namespace，所以这样做的好处是当你引用了第三方的代码时，防止重名。而且当我们自己的代码越来越大时，内部也会出现冲突。</p>
<p><strong>一个文件一个类</strong><br>好处：</p>
<ul>
<li>减少单个文件的长度</li>
<li>定位文件更方便</li>
<li>便于重用</li>
</ul>
<h2 id="代码块的组织">代码块的组织</h2>
<p>作为一个程序员，大部分时间实在看代码而不是在写。所以代码的可读性严重影响到我们的工作效率。<br>当你看到超过1000行的实现文件时，你还有看下去的欲望吗？<br>所以千万不要写出超过1000行的代码，有的话也得<a href="http://www.objc.io/issue-1/" target="_blank" rel="external">重构掉</a>。</p>
<p>当代码控制到1000行以内后，只是具备了可读的基本条件。我们的屏幕一般只能一次显示50行代码，从头看到尾就是20屏，常常会看了后面忘了前面。所以我们要把一个文件里面的所有函数有秩序的组织起来，让人不用重头看到尾，就能很快定位到想看的地方。<br>这里提供一个小办法：用#pragma mark宏根据功能区分开:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">pragma</span> mark - Life Circle</span></div><div class="line"><span class="preprocessor">#<span class="keyword">pragma</span> mark - Public Interface</span></div><div class="line"><span class="preprocessor">#<span class="keyword">pragma</span> mark - UI Actions</span></div><div class="line"><span class="preprocessor">#<span class="keyword">pragma</span> mark - Business Logic</span></div><div class="line"><span class="preprocessor">#<span class="keyword">pragma</span> mark - UITableViewDataSource</span></div><div class="line"><span class="preprocessor">#<span class="keyword">pragma</span> mark - UITableViewDelegate</span></div><div class="line"><span class="preprocessor">#<span class="keyword">pragma</span> mark - UIScrollViewDelegate</span></div><div class="line"><span class="preprocessor">#<span class="keyword">pragma</span> mark - Notification Handle</span></div><div class="line"><span class="preprocessor">#<span class="keyword">pragma</span> mark - Private Method</span></div></pre></td></tr></table></figure>

<h2 id="宏、枚举、常量的声明">宏、枚举、常量的声明</h2>
<p>宏的命名方式参考变量的命名方式，大写，用下划线分开</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">TARGET_OS_IPHONE</div></pre></td></tr></table></figure>

<p>枚举也有很多写法，这里推荐系统的方式</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">typedef NS_ENUM(NSInteger, NSTextAlignment) {</div><div class="line"><span class="constant">    NSTextAlignmentLeft</span>      = <span class="number">0</span>,    <span class="comment">// Visually left aligned</span></div><div class="line"><span class="constant">    NSTextAlignmentRight</span>     = <span class="number">1</span>,    <span class="comment">// Visually right aligned</span></div><div class="line"><span class="constant">    NSTextAlignmentCenter</span>    = <span class="number">2</span>,    <span class="comment">// Visually centered</span></div><div class="line"><span class="constant">    NSTextAlignmentJustified</span> = <span class="number">3</span>,    <span class="comment">// Fully-justified. The last line in a paragraph is natural-aligned.</span></div><div class="line"><span class="constant">    NSTextAlignmentNatural</span>   = <span class="number">4</span>,    <span class="comment">// Indicates the default alignment for script</span></div><div class="line">}</div></pre></td></tr></table></figure>

<p>常量以k开头，系统命名风格</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> *<span class="keyword">const</span> kAPNetworkDidSetupNotification;     <span class="comment">// 建立连接</span></div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> *<span class="keyword">const</span> kAPNetworkDidCloseNotification;     <span class="comment">// 关闭连接</span></div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> *<span class="keyword">const</span> kAPNetworkDidRegisterNotification;  <span class="comment">// 注册成功</span></div><div class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> *<span class="keyword">const</span> kAPNetworkDidLoginNotification;     <span class="comment">// 登录成功</span></div></pre></td></tr></table></figure>

<p>如果是数值常量，用宏的话，也可以用k开头</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">define</span> kDistancePoint  10.0f   <span class="comment">// 圆点、标志和正文的间距</span></span></div></pre></td></tr></table></figure>

<h2 id="函数的粒度">函数的粒度</h2>
<p>知道我们现在最长的函数有多少行吗？655行。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="pp">- <span class="params">(void)</span>getShopDetail</span></div></pre></td></tr></table></figure>

<p>一个函数最好不超过一屏（50行），千万不能超过两屏（100行）。<br>因为从设计的角度来说，一个函数只需要干一件事，所以50行一般是狗的，超长的函数往往干了很多事情，或者干了意见很大的事（拆成多件小事，交给子函数去干）。</p>
<h2 id="其它">其它</h2>
<ul>
<li><strong>Log</strong>：不要使用NSLog，提交了会因想到别人，而且最后打包删起来麻烦。需要找一个Log工具，MyNSLog功能不够。</li>
<li><strong>代码中尽量不要出现数字</strong>：据上下文推测出来的，还是计算的出为好（现在界面里面很多地方确实要写死数字，适配iPhone6会很困难）</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">_contentBkg </span>=<span class="string"> [[UIView alloc] initWithFrame:CGRectMake(0, 1 / [UIScreen mainScreen].scale, 320, 68 - 1)];</span></div></pre></td></tr></table></figure>

<ul>
<li><strong>避免复杂的表达式</strong>：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (tfPassword.<span class="keyword">text</span>!=nil &&</div><div class="line">    ![tfPassword.<span class="keyword">text</span> isEqualToString:@<span class="string">""</span>] &&</div><div class="line">    tfRequestNumber.<span class="keyword">text</span>!=nil &&</div><div class="line">    ![tfRequestNumber.<span class="keyword">text</span> isEqualToString:@<span class="string">""</span>]</div><div class="line">    )</div><div class="line">{</div><div class="line">}</div></pre></td></tr></table></figure>

<ul>
<li><strong>一个变量不在多个函数中出现，不要作为类变量：</strong></li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="type">MBProgressHUD</span>* hudProgress;</div><div class="line"><span class="type">int</span> <span class="literal">result</span>;</div></pre></td></tr></table></figure>

<ul>
<li><strong>每个类的.h开头的地方要有注释，说明这个类是干嘛的</strong></li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="javadoc">/**</span></div><div class="line"> * SDImageCache maintains a memory cache and an optional disk cache. Disk cache write operations are performed</div><div class="line"> * asynchronous so it doesn’t add unnecessary latency to the UI.</div><div class="line"> */</div><div class="line"><span class="annotation">@interface</span> SDImageCache : NSObject</div></pre></td></tr></table></figure>

<ul>
<li><strong>if后面的语句哪怕只有一行，都加括号</strong></li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> ([key rangeOfString:@<span class="string">"热"</span>].location != NSNotFound) {</div><div class="line">            titleLabel.<span class="variable">text =</span> @<span class="string">"热门城市"</span>;</div><div class="line">     }</div><div class="line">     <span class="keyword">else</span></div><div class="line">            titleLabel.<span class="variable">text =</span> key;</div></pre></td></tr></table></figure>

<h1 id="代码的风格">代码的风格</h1>
<p>风格如同习俗，不同地区有不同的习俗。你觉得入乡随俗好，就入乡随俗，这样避免了一些无谓的麻烦；但是你若坚持原有的习俗，社会也是能接受的，毕竟这些东西都是发展变化的，没有固定的模式，只有更好的模式。</p>
<h2 id="接口">接口</h2>
<p>这里的接口指的是一个类公开的一组方法，良好设计的类是高内聚低耦合的，所以接口必须是简洁的。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">PaySucceedViewController</span> : <span class="title">LCBaseViewController</span></span></div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,retain) <span class="built_in">NSString</span> *isSuccess;</div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,retain) <span class="built_in">NSString</span> *shopName;</div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,retain) <span class="built_in">NSString</span> *detailinfo;</div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,retain) <span class="built_in">NSString</span> *amount;</div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,retain) <span class="built_in">NSString</span> *omsOrderId;</div><div class="line"><span class="comment">/*!</span></div><div class="line"> *  支付订单类型</div><div class="line"> *</div><div class="line"> *  @since</div><div class="line"> */</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) ORDER_CATEGORY mCategory;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>

<p>上面的例子是一个ViewController，但是它暴露了太多属性，属性很零碎，传值的时候要一个一个传。其实这里属性应该属于一个叫订单Model的对象，把这些属性封装在OrderModel中，复用性和可维护性都会好很多。（但是现在代码整体结构没有Model层，这里需要很大的重构）</p>
<h2 id="继承">继承</h2>
<p>继承不是为了少写代码，它的目的是抽象，顺便少写了代码。<br>举NavigationBar的例子，用宏可以实现，用基类也可以实现，但基类抽象出了一个共有的接口，以后发生共性的变化够可以通过修改基类来实现，你可以在基类里加一组方法，而宏做不到。</p>
<h2 id="其它-1">其它</h2>
<p>代码规范的路还长着，先走出第一步吧！</p>
<h1 id="参考资料">参考资料</h1>
<p><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html" target="_blank" rel="external">Apple代码规范</a></p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/09/22/iOS架构设计与分层/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">&lt;</strong>
      <div class="article-nav-title">
        
          iOS架构设计与分层
        
      </div>
    </a>
  
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="Objective-C代码规范" data-title="Objective-C代码规范" data-url="http://linkageios.github.io/2014/09/16/Objective-C代码规范/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2014 SmartArrow
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>

  <script src="/js/main.js" type="text/javascript"></script>


  </div>
</body>
</html>